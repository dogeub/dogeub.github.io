const B=e;(function(h,i){const y=e,j=h();while(!![]){try{const k=parseInt(y(0x187))/0x1*(-parseInt(y(0x181))/0x2)+-parseInt(y(0x189))/0x3*(-parseInt(y(0x1b0))/0x4)+parseInt(y(0x185))/0x5+-parseInt(y(0x168))/0x6+-parseInt(y(0x1b5))/0x7*(-parseInt(y(0x1bf))/0x8)+-parseInt(y(0x191))/0x9*(parseInt(y(0x18f))/0xa)+-parseInt(y(0x1c0))/0xb;if(k===i)break;else j['push'](j['shift']());}catch(n){j['push'](j['shift']());}}}(d,0xc6422));const b=(function(){let h=!![];return function(i,j){const k=h?function(){const z=e;if(j){const n=j[z(0x1c5)](i,arguments);return j=null,n;}}:function(){};return h=![],k;};}()),a=b(this,function(){const A=e,h={'kAQvH':function(n,o){return n(o);},'XLvdv':'log','bflPG':'exception','rgdoO':A(0x1c8),'ehzaR':A(0x19f)};let i;try{const n=h[A(0x1c1)](Function,A(0x1a3)+A(0x1bc)+');');i=n();}catch(o){i=window;}const j=i['console']=i['console']||{},k=[h['XLvdv'],A(0x16f),'info','error',h['bflPG'],h[A(0x1c6)],h['ehzaR']];for(let q=0x0;q<k['length'];q++){const r=b[A(0x19e)]['prototype'][A(0x1ba)](b),s=k[q],t=j[s]||r;r['__proto__']=b['bind'](b),r['toString']=t[A(0x196)]['bind'](t),j[s]=r;}});function e(a,b){a=a-0x163;const c=d();let f=c[a];return f;}a();import{af as f}from'./vendor-modules.OeOfergd.js';function d(){const Y=['FuUyY','serviceWorker','apply','rgdoO','active','table','saveGm','readonly','audio/wav','dbAction','put','getTime','isBinary','loadAsync','text/csv','base64','840078mKwlch','image/jpeg','DoLoc','gm-','ORRCV','/game/','QyDIX','warn','find','target','application/xml','/index.html','getMime','error','isArray','createObjectStore','kSEfE','txt','now','video/ogg','csv','get','initDB','text/markdown','gm\x20loader\x20db','495706kItdjZ','gms','transaction','audio/aac','6265360DYnCmv','application/vnd.ms-fontobject','1ctxBct','GRXUl','27486sIDJCN','lastPlayed','application/wasm','split','ZmcaR','application/javascript','4130090DiAdpD','blob','9DDXIla','font/woff','assign','/loadersw.js','image/bmp','toString','openCursor','onerror','FCpKT','value','image/gif','scriptURL','onsuccess','constructor','trace','application/octet-stream','includes','application/json','return\x20(function()\x20','toISOString','delete','DLxhV','text/html','PIMBV','readwrite','VJJir','svg','continue','video/mp4','cpnDu','entries','308PLSSSb','font/woff2','onupgradeneeded','image/avif','application/pdf','430087WCbhjG','audio/mpeg','pop','NpOTI','application/gzip','bind','font/ttf','{}.constructor(\x22return\x20this\x22)(\x20)','result','css','64CrQPRP','9208463LKmgQB','kAQvH','regSW'];d=function(){return Y;};return d();}const p=B(0x180),m=0x1,c=B(0x182),g=new Set(['html','htm',B(0x1be),'js','mjs','json','xml',B(0x179),'md',B(0x17c),B(0x1ab)]);class w{constructor(){this['db']=null;}async[B(0x17e)](){return this['db']?this['db']:new Promise((h,i)=>{const C=e,j=indexedDB['open'](p,m);j[C(0x198)]=()=>i(j[C(0x175)]),j['onsuccess']=()=>{const D=C;this['db']=j[D(0x1bd)],h(this['db']);},j[C(0x1b2)]=k=>{const E=C,n=k['target']['result'];n['objectStoreNames']['contains'](c)||n[E(0x177)](c,{'keyPath':'id'});};});}async['dbAction'](h,i){const F=B,j={'UXXek':function(n,o,q,r){return n(o,q,r);}},k=await this[F(0x17e)]();return new Promise((n,q)=>{const G=F,r=k[G(0x183)]([c],h)['objectStore'](c);j['UXXek'](i,r,n,q);});}async[B(0x1c9)](h,i){const H=B,j={'QyDIX':'readwrite'};return this[H(0x1cc)](j[H(0x16e)],(k,n,o)=>{const I=H,q=k[I(0x1cd)]({'id':h,'name':h,'files':i,'uploadDate':new Date()[I(0x1a4)](),'lastPlayed':new Date()['toISOString']()});q['onsuccess']=()=>n(),q[I(0x198)]=()=>o(q['error']);});}async['updateLastPlayed'](h){const J=B,i={'DoLoc':J(0x1a9)};return this['dbAction'](i[J(0x16a)],(j,k,n)=>{const K=J,o={'PIMBV':function(r){return r();}},q=j[K(0x17d)](h);q['onsuccess']=()=>{const L=K,u=q[L(0x1bd)];if(u){u['lastPlayed']=new Date()[L(0x1a4)]();const v=j['put'](u);v['onsuccess']=()=>k(),v['onerror']=()=>n(v[L(0x175)]);}else o[L(0x1a8)](k);},q['onerror']=()=>n(q[K(0x175)]);});}async['cleanupOld'](){const M=B,h={'cvZBi':function(i){return i();},'hpCfh':function(i,j){return i-j;},'FCpKT':M(0x1a9)};return this['dbAction'](h[M(0x199)],(j,k,n)=>{const N=M,o=j[N(0x197)](),q=h['hpCfh'](Date['now'](),0x10e0*0x3c*0x3e8);o[N(0x19d)]=u=>{const O=N,v=u[O(0x171)][O(0x1bd)];if(v){const x=v[O(0x19a)];new Date(x[O(0x18a)]||x['uploadDate'])[O(0x163)]()<q&&v[O(0x1a5)](),v[O(0x1ac)]();}else h['cvZBi'](k);},o[N(0x198)]=()=>n(o[N(0x175)]);});}async['getGm'](h){const P=B;return this[P(0x1cc)](P(0x1ca),(j,k,n)=>{const Q=P,o=j[Q(0x17d)](h);o['onsuccess']=()=>k(o[Q(0x1bd)]),o[Q(0x198)]=()=>n(o['error']);});}async['getAllGms'](){return this['dbAction']('readonly',(h,j,k)=>{const R=e,n=h['getAll']();n[R(0x19d)]=()=>j(n[R(0x1bd)]||[]),n[R(0x198)]=()=>k(n[R(0x175)]);});}['isBinary'](h){const S=B,i=h[S(0x18c)]('.')[S(0x1b7)]()['toLowerCase']();return!g['has'](i);}async['extractZip'](h){const T=B,j=await(await fetch(h))[T(0x190)](),k=await new f()[T(0x165)](j),q={};for(const [t,u]of Object[T(0x1af)](k['files']))if(!u['dir']){const v=this[T(0x164)](t);q[t]={'content':await u['async'](v?T(0x167):'string'),'mime':this[T(0x174)](t),'binary':v};}return q;}async['extractMultipleZips'](h){const U=B,j={};for(const k of h){const n=await this['extractZip'](k);Object[U(0x193)](j,n);}return j;}[B(0x174)](h){const V=B,i={'BUUsq':V(0x1a7),'HTQoW':'text/css','ioRUm':V(0x18e),'GRXUl':V(0x172),'VIAXv':V(0x17f),'VJJir':V(0x166),'kSEfE':V(0x169),'ORRCV':'image/webp','ZmcaR':V(0x195),'DEkZI':V(0x1bb),'ssvZn':'font/otf','Ijkqt':V(0x186),'qEcFe':'audio/ogg','NpOTI':V(0x184),'XPMaH':'video/webm','cpnDu':V(0x17b),'DLxhV':V(0x18b),'szOQe':V(0x1b9),'vCniD':V(0x1b4),'FuUyY':V(0x1a0)},j=h[V(0x18c)]('.')[V(0x1b7)]()['toLowerCase']();return{'html':i['BUUsq'],'htm':V(0x1a7),'css':i['HTQoW'],'js':i['ioRUm'],'mjs':V(0x18e),'json':V(0x1a2),'xml':i[V(0x188)],'txt':'text/plain','md':i['VIAXv'],'csv':i[V(0x1aa)],'png':'image/png','jpg':i[V(0x178)],'jpeg':i[V(0x178)],'gif':V(0x19b),'svg':'image/svg+xml','ico':'image/x-icon','webp':i[V(0x16c)],'bmp':i[V(0x18d)],'avif':V(0x1b3),'woff':V(0x192),'woff2':V(0x1b1),'ttf':i['DEkZI'],'otf':i['ssvZn'],'eot':i['Ijkqt'],'mp3':V(0x1b6),'wav':V(0x1cb),'ogg':i['qEcFe'],'m4a':'audio/mp4','aac':i[V(0x1b8)],'mp4':V(0x1ad),'webm':i['XPMaH'],'ogv':i[V(0x1ae)],'wasm':i[V(0x1a6)],'zip':'application/zip','gz':i['szOQe'],'pdf':i['vCniD'],'data':'application/octet-stream','unityweb':V(0x1a0),'bundle':'application/octet-stream','bin':V(0x1a0),'dat':i[V(0x1c3)],'mem':'application/octet-stream','asset':V(0x1a0),'resource':'application/octet-stream'}[j]||V(0x1a0);}async[B(0x1c2)](){const W=B,h={'CkYVI':function(i,j){return i===j;},'wvbqd':W(0x194)};if(W(0x1c4)in navigator)try{let i=(await navigator[W(0x1c4)]['getRegistrations']())[W(0x170)](j=>j[W(0x1c7)]?.[W(0x19c)][W(0x1a1)](W(0x194)));if(!i){const j=await navigator['serviceWorker']['register'](h['wvbqd']);return await navigator[W(0x1c4)]['ready'],j;}return(i['installing']||i['waiting'])&&await new Promise(k=>{const n={'VULyq':function(q,r){return h['CkYVI'](q,r);}},o=i['installing']||i['waiting'];o['addEventListener']('statechange',()=>{n['VULyq'](o['state'],'activated')&&k();});}),i;}catch(k){console[W(0x175)]('from\x20local\x20gm\x20loader',k);}}async['load'](h,i){const X=B,j={'RxeMZ':X(0x16b),'FoCpO':function(r,u){return r(u);}};await this[X(0x1c2)](),await this['initDB']();const k=Array[X(0x176)](h),n=(k?h[0x0]:h)['split']('/')['pop']()['replace']('.zip','')||j['RxeMZ']+Date[X(0x17a)]();if(await this['getGm'](n))return await this['updateLastPlayed'](n),{'url':X(0x16d)+n+X(0x173),'cached':!0x0};i&&i(!0x0);const q=k?await this['extractMultipleZips'](h):await this['extractZip'](h);return await this['saveGm'](n,q),i&&j['FoCpO'](i,!0x1),{'url':X(0x16d)+n+'/index.html','cached':!0x1};}}export{w as default};